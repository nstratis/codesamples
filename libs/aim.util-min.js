/*global console, debug, aim, opera, alert, ActiveXObject, DOMTokenList */
/*jslint plusplus:true, nomen:true, bitwise:true, newcap:true, regexp:true, forin:true */
/**
 * @name AIM JavaScript Framework and Library
 * @author AV Digital Media Ltd.
 * @version 1.9.0
 * @copyright (c) Copyright 2013 - 2017 AV Digital Media Ltd. All Rights Reserved.
 * No unauthorized copying, distribution or modification to this code in whole
 * or in part is permitted without the express permission of
 * AV Digital Media Ltd (UK).
 */
 (function(){"use strict";
window.aim=window.aim||{};window.aim.DEBUG=true;window.aim.SUPPRESS_ALERT=false;window.debug=function(){var d=arguments,c=d.length;function g(){Array.prototype.pop.call(d);}if(window.aim.DEBUG){try{switch(d[c-1]){case"W":g();console.warn.apply(console,arguments);break;case"E":g();console.error.apply(console,arguments);break;case"I":g();console.info.apply(console,arguments);break;default:console.log.apply(console,arguments);}}catch(b){try{opera.postError.apply(opera,arguments);}catch(f){try{d=arguments;console.log(d[0]);}catch(a){if(!window.AIM.SUPPRESS_ALERT){alert(Array.prototype.join.call(arguments,""));}}}}}};aim.dom=(function(){aim.autoTouch=true;if(DOMTokenList!==undefined){DOMTokenList.prototype.addMultiple=function(ah){var af,ag=ah.length;for(af=0;af<ag;af++){this.add(ah[af]);}};DOMTokenList.prototype.removeMultiple=function(ah){var af,ag=ah.length;for(af=0;af<ag;af++){this.remove(ah[af]);}};}function M(af){if(af!==undefined&&af){if(af.nodeName!==undefined&&af.nodeName){switch(af.nodeType){case 1:return true;case 3:return(/\S/).test(af.nodeValue)?"textnode":"whitespace";}}}return false;}function h(af){return(af!==null&&M(af))&&!!af.ownerDocument&&(window===(af.ownerDocument.defaultView||af.ownerDocument.parentWindow));}function aa(ag,af){if(aim.autoTouch&&af!==undefined&&af!==null&&af.match(/touch/)&&ag.match(/touch/)===null){return true;}return false;}function ae(af){if(!af){return false;}if(af.nodeType===3){while(af.nextSibling&&af.nextSibling.nodeType===3){af.nodeValue+=af.nextSibling.nodeValue;af.parentNode.removeChild(af.nextSibling);}}else{ae(af.firstChild);}ae(af.nextSibling);}function Q(ag){var ai=parseInt(ag,16),aj=(ai>>16)&255,ah=(ai>>8)&255,af=ai&255;return aj+", "+ah+", "+af;}function Z(ag,ah){var aj=document,af=null;if(ah!==undefined&&ah!==null){if(ah.node!==undefined){aj=ah.node;}else{if(typeof ah==="string"){aj=document.querySelector(ah);}else{aj=ah;}}}else{if(aim.SHOW_DOC!==undefined&&aim.SHOW_DOC){console.warn(("Selection using: document, for "+ag));}aj=document;}if(aj!==undefined&&aj!==null){if(document.querySelectorAll){try{af=(typeof ag==="string")?aj.querySelectorAll(ag):null;}catch(ai){return false;}}if(af){if(af.length===1){af=af[0];}else{if(af.length===0){af=null;}}}}return af;}function R(ag){var af=document.createElement("div");af.innerHTML=ag;return af.childNodes[0];}function H(ag){var ah="el",af=null;if(ag!==undefined&&ag!==null){if(ag.node===undefined){ah=(typeof ag==="string")?"el":"dom";if(ah==="el"){if(ag.match(/</g)&&(ag.match(/<\//g)||ag.match(/\/>/g))){af=R(ag);}else{af=Z(ag);if(af&&af.length!==undefined){af=af[0];}}}else{af=ag;}}else{if(ag.node!==undefined){ah="aim";af=ag.node;}}}else{console.warn("aim.dom objectype() - The item supplied is null");}return{type:ah,node:af};}function m(ag,ai,ah,af){if(window.addEventListener){ag.addEventListener(ai,ah,af);}else{if(window.attachEvent){ag.attachEvent("on"+ai,ah);}}}function e(ag,ai,ah,af){if(window.removeEventListener){ag.removeEventListener(ai,ah,af);}else{if(window.detachEvent){ag.detachEvent("on"+ai,ah);}}}function i(an,aq,am,aj,ao,al){if(Object.prototype.toString.call(an)==="[object Array]"||Object.prototype.toString.call(an)==="[object NodeList]"){console.warn("aim.dom.bind - passing an array of elements to the bind function is not supported, for binding multiple selected elements select the elements using the aim.$ function which will reference the elements as aim.$ objects allowing each to have the associated events bound.");return false;}var ag={},af,ap,ak,ai=H(an),ah=function(ar){if(ar.type.match(/touchstart/)||ar.type.match(/touchend/)){if(aim.autoTouch&&al!==false){ar.preventDefault();}}am.call(ao||null,ar,an);};af=aq.split(" ");for(ap in af){if(af.hasOwnProperty(ap)){ag[af[ap]]={func:ah,bubbles:aj};m(ai.node,af[ap],ah,aj);if(ai.type==="aim"){if(an.bindings===undefined){an.bindings={};}an.bindings[af[ap]]=ag[af[ap]];}if(af[ap]==="mousedown"){ak="touchstart";}else{if(af[ap]==="mouseup"){ak="touchend";}}if(aa(af[ap],ak)){ag[ak]={func:ah,bubbles:aj};m(ai.node,ak,ah,aj);if(ai.type==="aim"){an.bindings[ak]=ag[ak];}}}}return ag;}function x(ag,ak,aj,af){var ai=H(ag),ah;if(ai.type==="aim"){if(ag.bindings!==undefined){if(ag.bindings[ak]!==undefined){e(ai.node,ak,ag.bindings[ak].func,ag.bindings[ak].bubbles);delete ag.bindings[ak];if(ak==="mousedown"){ah="touchstart";}else{if(ak==="mouseup"){ah="touchend";}}if(ag.bindings[ah]!==undefined){if(aa(ak,ah)){e(ai.node,ah,ag.bindings[ah].func,ag.bindings[ah].bubbles);delete ag.bindings[ah];}}}}}else{if(ai.type==="dom"){e(ai.node,ak,aj,af);}}}function ad(af){var ah,ag=H(af);if(ag.type==="aim"){if(af.bindings!==null&&af.bindings!==undefined){af.bindings=null;ah=af.node.cloneNode(true);af.node.parentNode.replaceChild(ah,af.node);af.node=ah;}}else{if(ag.type==="dom"){ah=af.cloneNode(true);af.parentNode.replaceChild(ah,af);}}return ah;}function U(af,aj){var ah,ai=H(af),ag;if(ai.type==="aim"){ag=ai.node;}else{if(ai.type==="dom"){ag=af;}}if(document.createEvent){ah=document.createEvent("MouseEvents");ah.initEvent(aj,true,true);ag.dispatchEvent(ah);}else{if(document.createEventObject){ah=document.createEventObject(window.event);ag.fireEvent("on"+aj,ah);}}}function y(ai,af){if(typeof ai!=="string"&&(ai.length!==undefined||Object.prototype.toString.call(ai)==="[object NodeList]")){return false;}var ak=H(ai),ag,ah,aj,al;if(ak.type==="aim"){ag=ai.node.cloneNode((af!==undefined)?af:false);ah=aim.$(ag);if(ai.bindings!==undefined&&ai.bindings){al=ai.bindings;for(aj in al){if(al.hasOwnProperty(aj)){if((window.attachEvent&&window.addEventListener)||(!window.attachEvent&&window.addEventListener)){i(ah,aj,al[aj].func,al[aj].bubbles,al[aj].scope);}if(!ah.bindings){ah.bindings={};}ah.bindings[aj]={callback:al[aj].func,bubbles:al[aj].bubbles,scope:al[aj].scope};}}}}else{if(ak.type==="dom"){ah=ai.cloneNode((af!==undefined)?af:false);}else{if(ak.type==="el"){ah=ak.node.cloneNode((af!==undefined)?af:false);}}}return ah;}function P(ai,ah){var af=H(ah).node,ag=document.createElement("div");ag.innerHTML=ai;if(af){while(ag.firstChild){af.appendChild(ag.firstChild);}}}function c(ai,ah){var ag,af;if(ah===undefined){af=document.body||document.getElementsByTagName("body")[0];}else{af=H(ah).node;}ag=H(ai).node;if(ag&&af){af.appendChild(ag);}}function k(ai,ah){var ag,af;if(ah===undefined){af=document.body||document.getElementsByTagName("body")[0];}else{af=H(ah).node;}ag=H(ai);if(ag.node){ag=ag.node;if(ag&&af){af.appendChild(ag);}}else{af.innerHTML+=ai;}}function ac(ai,af){var ah=H(ai).node,ag=H(af).node;if(ah&&ag){ag.parentNode.insertBefore(ah,ag);}}function o(ai,af){var ah=H(ai).node,ag=H(af).node;if(ah&&ag){ag.parentNode.insertBefore(ah,ag.nextSibling);}}function J(ai,ag,af){var ah=H(ai).node;if(ag===undefined){ag="*";}if(af){ah=ah.contentDocument;}return ah.getElementsByTagName(ag);}function u(ag){var af=H(ag).node;return af.children;}function q(af){var ag=H(af).node;return ag.children[0]||null;}function t(af){var ag=H(af).node;return ag.children[ag.children.length-1]||null;}function p(ai,ag){var ah=H(ai).node,af=ah.parentNode;if(ag===undefined||ag){af=aim.$(af);}return af;}function g(ai,ah){var ag=H(ai).node,af;if(ah!==undefined){af=H(ah).node;return af.contains(ag);}return false;}function C(ai,ah){var ag=H(ai).node,af;if(ah===undefined){af=ag.parentNode;}else{af=H(ah).node;}if(af!==undefined){af.removeChild(ag);return true;}return false;}function A(ag,ak,aj){var ai=H(ak).node,ah,af;if(typeof ag==="string"){if(ag.match(/</g)&&ag.match(/<\//g)){ag=R(ag);}}ah=H(ag).node;if(aj===undefined){af=ai.parentNode;}else{af=H(aj).node;}af.replaceChild(ah,ai);}function Y(af){var ag=H(af);if(ag.type==="aim"){ad(af);C(af);}return null;}function b(ag){var af=H(ag).node;af.innerHTML=null;}function S(ag){var af=H(ag).node;af.normalize();if(af.childNodes.length!==1){ae(af.firstChild);}}function G(ag,ah){var af=H(ag).node;if(ah!==undefined){if(af.textContent!==undefined){af.textContent=ah;}if(af.innerText!==undefined){af.innerText=ah;}}return af.textContent||af.innerText;}function I(ag,ah){var af=H(ag).node;if(ah!==undefined){af.innerHTML=ah;}return af.innerHTML||null;}function F(ag,ai){var af=H(ag).node,ah;if(ai!==undefined){if(af.value===undefined){af.setAttribute("value",ai);}else{af.value=ai;}}ah=af.value||af.getAttribute("value")||null;return ah;}function X(ag){var af=H(ag).node,ah;ah=af.options[af.selectedIndex].value||af.options[af.selectedIndex].text||null;return ah;}function N(ag,ah){var af=H(ag).node;if(ah!==undefined){af.selectedIndex=ah;}return af.selectedIndex;}function D(ag,ah){var af=H(ag).node;if(ah!==undefined){af.checked=ah;}return af.checked;}function j(ah,af){var ag=H(ah).node;if(af!==undefined){ag.className=af;}return ag.className||null;}function z(ak,ag){var ai=H(ak).node,af,ah,aj;if(ag!==undefined&&ai){af=ag.split(" ");aj=af.length;if(ai.classList){if(aj===1){ai.classList.add(af[0]);}else{if(ai.classList.addMultiple!==undefined){ai.classList.addMultiple(af);}}}else{for(ah=0;ah<aj;ah++){ai.className+=" "+af[ah];}}return true;}return false;}function r(ak,ag){var ai=H(ak).node,af,aj,ah;if(ag!==undefined&&ai){af=ag.split(" ");aj=af.length;if(ai.classList){if(aj===1){ai.classList.remove(af[0]);}else{if(ai.classList.removeMultiple!==undefined){ai.classList.removeMultiple(af);}}}else{for(ah=0;ah<aj;ah++){ai.className=ai.className.replace(new RegExp(" "+af[ah],"g"),"");}}return true;}return false;}function T(ah,ai){var ag=H(ah).node,af;if(ai!==undefined&&ag){if(ag.classList){af=ag.classList.contains(ai);}else{af=ag.className.match(new RegExp(ai,"g"));}return af;}return false;}function W(aj,an){var ah,af=H(aj).node,ao={},ak,am,ai,ag,ap;for(ah in an){if(an.hasOwnProperty(ah)){af.style[ah]=an[ah];}}try{if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return A(/^\s+|\s+$/g,"");};}ak=af.style.cssText.trim().split(";");ai=ak.length;for(am=0;am<ai;am++){if(ak[am]!==""){ag=ak[am].split(": ");ap=ag[1].trim();if(ap.charAt(0)==="#"){ap="rgb("+Q(ap.slice(1))+")";}ao[ag[0].trim().toLowerCase()]=ap;}}}catch(al){return false;}return ao;}function s(ai,af,aj){var ag=H(ai).node;if(aj!==undefined){ag.setAttribute(af,aj);}if(af.charAt(0)==="-"){af=af.substr(1,af.length);ag.removeAttribute(af);try{delete ag.attributes[af];}catch(ah){return false;}}return ag.getAttribute(af)||null;}function v(ai,af,aj){var ag=H(ai).node;if(aj!==undefined){ag[af]=aj;}if(af.charAt(0)==="-"){af=af.substr(1,af.length);delete ag[af];try{delete ag.attributes[af];}catch(ah){return false;}}return ag[af]||null;}function B(ag,ah){var af=H(ag).node;if(ah!==undefined&&af){af.style.display=ah;}return af.style.display||null;}function V(ag){var af=H(ag).node;af.focus();}function L(ag){var af=H(ag).node;af.disabled=true;}function l(ag){var af=H(ag).node;af.disabled=false;}function a(ag,ah){var af=H(ag).node;if(ah!==undefined){af.style.width=ah;}return af.style.width;}function f(ag,ah){var af=H(ag).node;if(ah!==undefined){af.style.height=ah;}return af.style.height;}function ab(af,ai){var ag,ah=af.length;for(ag=0;ag<ah;ag++){ai(af[ag]);}}function d(){return false;}d.prototype=[];d.prototype.select=function(ah,ag){var af;if(ag!==undefined&&ag){af=new d();}else{af=[];}ab(this,function(ai){var aj=Z(ah,ai);if(ag!==undefined&&ag){af.push(aim.$(aj));}else{af.push(aj);}});return af;};d.prototype.bind=function(aj,ai,af,ah,ag){ab(this,function(ak){ak.bind(aj,ai,af,ah,ag);});};d.prototype.unbind=function(af){ab(this,function(ag){ag.unbind(af);});};d.prototype.unbindAll=function(){ab(this,function(af){af.unbindAll();});};d.prototype.dispatch=function(af){ab(this,function(ag){ag.dispatch(af);});};d.prototype.clone=function(af){var ag=[];ab(this,function(ah){ag.push(ah.clone(af));});return ag;};d.prototype.append=function(af){ab(this,function(ag){P(af,ag);});};d.prototype.appendTo=function(af){ab(this,function(ag){ag.appendTo(af);});};d.prototype.insert=function(af){ab(this,function(ag){ag.insert(af);});};d.prototype.insertBefore=function(af){ab(this,function(ag){ag.insertBefore(af);});};d.prototype.insertAfter=function(af){ab(this,function(ag){ag.insertAfter(af);});};d.prototype.tags=function(ag,af){var ah=[];ab(this,function(ai){var aj=ai.tags(this,ag,af);if(aj&&aj.length!==0){ah.push(aj);}});return ah;};d.prototype.children=function(){var af=[];ab(this,function(ag){var ah=ag.children(this);if(ah&&ah.length!==0){af.push(ah);}});return af;};d.prototype.first=function(){var af=[];ab(this,function(ag){var ah=ag.first(this);if(ah!==null){af.push(ah);}});return af;};d.prototype.last=function(){var af=[];ab(this,function(ah){var ag=ah.last(this);if(ag!==null){af.push(ag);}});return af;};d.prototype.parent=function(){var af=[];ab(this,function(ah){var ag=ah.parent(this);if(ag!==null){af.push(ag);}});return af;};d.prototype.remove=function(){ab(this,function(af){C(af);});};d.prototype.replace=function(af){ab(this,function(ag){A(af,ag);});};d.prototype.destroy=function(){ab(this,function(af){Y(af);});return null;};d.prototype.empty=function(){ab(this,function(af){b(af);});};d.prototype.merge=function(){var af=[];ab(this,function(ag){af.push(S(ag));});return af;};d.prototype.text=function(ag){var af=[];ab(this,function(ah){af.push(G(ah,ag));});return af;};d.prototype.html=function(ag){var af=[];ab(this,function(ah){af.push(I(ah,ag));});return af;};d.prototype.val=function(af){var ag=[];ab(this,function(ah){ag.push(F(ah,af));});return ag;};d.prototype.selectedValue=function(){var af=[];ab(this,function(ag){af.push(X(ag));});return af;};d.prototype.selectedIndex=function(af){var ag=[];ab(this,function(ah){ag.push(N(ah,af));});return ag;};d.prototype.checked=function(af,ah){var ag=[];ab(this,function(ai){ag.push(D(ai,af,ah));});return ag;};d.prototype.classes=function(ag){var af=[];ab(this,function(ah){af.push(j(ah,ag));});return af;};d.prototype.addClass=function(ag){var af=[];ab(this,function(ah){af.push(z(ah,ag));});return af;};d.prototype.removeClass=function(ag){var af=[];ab(this,function(ah){af.push(r(ah,ag));});return af;};d.prototype.hasClass=function(ag){var af=[];ab(this,function(ah){af.push(T(ah,ag));});return af;};d.prototype.attr=function(ag,ah){var af=[];ab(this,function(ai){af.push(s(ai,ag,ah));});return af;};d.prototype.prop=function(ag,ah){var af=[];ab(this,function(ai){af.push(v(ai,ag,ah));});return af;};d.prototype.css=function(ag){var af=[];ab(this,function(ah){af.push(W(ah,ag));});return af;};d.prototype.display=function(ag){var af=[];ab(this,function(ah){af.push(B(ah,ag));});return af;};d.prototype.disabled=function(){ab(this,function(af){af.disabled();});};d.prototype.enabled=function(){ab(this,function(af){af.enabled();});};d.prototype.destroyComponent=function(af){ab(this,function(ag){ag.destroyComponent(af);});};function w(ah){var ai=new d(),af,ag=ah.length;for(af=0;af<ag;af++){ai.push(aim.dom.$(ah[af]));}return ai;}function E(af){this.node=af;}E.prototype.select=function(ag,af){var ah=Z(ag,this);if(ah&&af!==undefined&&af){if(ah.length===undefined){return aim.$(ah);}if(ah.length===1){return aim.$(ah[0]);}return w(ah);}return(ah&&ah.length===1)?ah[0]:ah;};E.prototype.bind=function(aj,ai,af,ah,ag){i(this,aj,ai,af,ah,ag);};E.prototype.unbind=function(af){x(this,af);};E.prototype.unbindAll=function(){ad(this);};E.prototype.dispatch=function(af){U(this,af);};E.prototype.clone=function(af){return y(this,af);};E.prototype.append=function(af){P(af,this);};E.prototype.appendTo=function(af){c(this,af);};E.prototype.insert=function(af){k(this,af);};E.prototype.insertBefore=function(af){ac(this,af);};E.prototype.insertAfter=function(af){o(this,af);};E.prototype.tags=function(ag,af){return J(this,ag,af);};E.prototype.children=function(){return u(this);};E.prototype.first=function(){return q(this);};E.prototype.last=function(){return t(this);};E.prototype.parent=function(){return p(this);};E.prototype.has=function(af){return g(af,this);};E.prototype.remove=function(){return C(this);};E.prototype.replace=function(af){A(af,this);};E.prototype.destroy=function(){return Y(this);};E.prototype.empty=function(){b(this);};E.prototype.merge=function(){return S(this);};E.prototype.text=function(af){return G(this,af);};E.prototype.html=function(af){return I(this,af);};E.prototype.val=function(af){return F(this,af);};E.prototype.selectedValue=function(){return X(this);};E.prototype.selectedIndex=function(af){return N(this,af);};E.prototype.checked=function(af){return D(this,af);};E.prototype.classes=function(af){return j(this,af);};E.prototype.addClass=function(af){return z(this,af);};E.prototype.removeClass=function(af){return r(this,af);};E.prototype.hasClass=function(af){return T(this,af);};E.prototype.attr=function(af,ag){return s(this,af,ag);};E.prototype.prop=function(af,ag){return v(this,af,ag);};E.prototype.css=function(af){return W(this,af);};E.prototype.display=function(af){return B(this,af);};E.prototype.focus=function(){return V(this);};E.prototype.disabled=function(){return L(this);};E.prototype.enabled=function(){return l(this);};E.prototype.width=function(af){return a(this,af);};E.prototype.height=function(af){return f(this,af);};E.prototype.destroyComponent=function(af){if(aim.ui!==undefined){aim.ui.destroyComponent(this,af);}};function O(ai,ah){var ag,af;if(typeof ai==="string"){if(ai.match(/</g)&&(ai.match(/<\//g)||ai.match(/\/>/g))){ag=R(ai);if(ah!==undefined){ah.appendChild(ag);}}else{ag=Z(ai,ah);}}else{if(M(ai)===true){ag=ai;}}if(ag){if(ag.length===undefined||ag.nodeName==="SELECT"){af=new E(ag);}else{af=w(ag);}}return af;}function n(ai,af){var ah,ag=document.createElement(ai.type);if(ai.classes!==undefined){ag.className=ai.classes;}if(ai.content!==undefined){if(ai.type==="input"){ag.value=ai.content;}else{ag.innerHTML=ai.content;}}if(ai.parent!==undefined&&ai.parent!==null){ai.parent.appendChild(ag);}if(ai.attributes!==undefined){for(ah in ai.attributes){if(ai.attributes.hasOwnProperty(ah)){ag.setAttribute(ah,ai.attributes[ah]);}}}if(af){return new E(ag);}return ag;}function K(aj,ai,ak,ah,af){var al,ag=document.createElement((ah!==undefined)?ah:"div");if(aj!==undefined&&aj!==null){ag.className=aj;}if(ak!==undefined&&ak!==null){ag.innerHTML=ak;}if(ai!==undefined&&ai!==null){ai.appendChild(ag);}if(af!==undefined){for(al in af){if(af.hasOwnProperty(al)){ag.setAttribute(al,af[al]);}}}return ag;}return{isHTML:M,existsInDOM:h,create:n,createElement:K,select:function(af,ah,ag){var ai;if(typeof ah==="boolean"){ag=ah;ai=Z(af);}else{ai=Z(af,ah);}if(ag){if(Object.prototype.toString.call(ai)==="[object NodeList]"){return w(ai);}return O(ai);}return ai;},bind:i,unbind:x,unbindAll:ad,dispatch:U,clone:y,appendTo:c,insert:k,insertBefore:ac,insertAfter:o,tags:J,children:u,first:q,last:t,parent:p,has:g,remove:C,replace:A,destroy:Y,empty:b,merge:S,append:P,text:G,html:I,val:F,selectedValue:X,selectedIndex:N,checked:D,classes:j,addClass:z,removeClass:r,hasClass:T,css:W,attr:s,prop:v,focus:V,display:B,disabled:L,enabled:l,width:a,height:f,$:O};}());aim.$=aim.dom.$;aim.ajax=(function(){var c="default",a="default",g="",f="GET";function d(l){var m=[],j,k;for(k in l){if(l.hasOwnProperty(k)){m.push(k+"="+encodeURIComponent(l[k]));}}j=m.join("&");return j;}function i(l,n,j,o,m){var k="";if(n!==undefined&&n){k=n;if(j==="json"){k=JSON.stringify(k);k=encodeURIComponent(k);}else{if(j==="default"){k=d(n);}}if(m==="base64"){if(aim.encode){k=aim.encode.b64enc(k);if(l==="GET"){k="e="+k;}}}else{if(l==="GET"){if(j!=="default"){k="d="+k;}}}}if(o!==undefined&&o&&l==="GET"){if(k===undefined){k+=o;}else{k=o+"&"+k;}}if(k!==undefined&&k!==""){if(l==="GET"){k="?"+k;}}return k;}function b(j,l){var k;for(k in l){if(l.hasOwnProperty(k)){j.setRequestHeader(k,l[k]);}}}function h(n,k,m){var j=n.responseText||n.response;if(j!==undefined&&j!==""){if(aim.encode){if(m==="base64"){j=aim.encode.b64dec(j);}}if(k==="json"){try{j=decodeURI(j);}catch(o){}try{j=JSON.parse(j);}catch(l){debug("There was an error parsing the json object",l,"E");}}}if(k==="xml"||n.responseXML){if(n.responseXML!==""&&n.responseXML.length>0){if(m==="default"){j=n.responseXML;}}}return j;}function e(v,u){var n,q={},j=v.url||g,s=v.type||f,t=v.dataType||a,r=null,m=null,k,p,o;if(v.encode!==undefined){if(Object.prototype.toString.call(v.encode)==="[object Array]"){r=v.encode;}else{r=[v.encode];}}else{r=[c];}if(window.ActiveXObject){n=new ActiveXObject("Microsoft.XMLHTTP");}else{if(window.XMLHttpRequest){n=new XMLHttpRequest();}}if(n){j=j.split("?");if(j[1]!==undefined){m=j[1];}j=j[0];if(typeof t==="string"){p=t;o=t;}else{if(Object.prototype.toString.call(t)==="[object Array]"){p=t[0];o=t[1];}}if(t==="file"){k=v.data;}else{k=i(s,v.data,p,m,r[0]);}n.onreadystatechange=function(){if(n.readyState===4&&n.status===200){var w=h(n,o,r[1]||r[0]);if(v.success!==undefined){v.success.call(u,w);}}else{if(n.readyState===4){if(v.error!==undefined){v.error.apply(v.scope,[n]);}}}if(v.readystate!==undefined){v.readystate.apply(u,[n]);}};try{if(s==="GET"){n.open("GET",j+k,true);}else{if(v.type==="POST"){n.open("POST",j,true);}}q["X-Requested-With"]="AimHttp";if(v.dataType==="json"){q["Content-Type"]="application/json";}else{if(v.dataType==="file"){debug("File Upload");}else{q["Content-type"]="application/x-www-form-urlencoded";}}b(n,q);if(v.headers!==undefined){b(n,v.headers);}setTimeout(function(){if(v.method==="GET"){n.send();}else{n.send(k);}},20);}catch(l){if(debug!==undefined){debug("Request.open() is not allowed if the file is not deployed to a server",l,"W");}}}}return{send:e};}());aim.encode=(function(){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function e(m){if(m===undefined||typeof m!=="string"||!m){return m;}var n=0,l=0,h,v,r,q,o,w,u,t,s,p=[],g;m=decodeURI(encodeURIComponent(m));do{r=m.charCodeAt(n++);q=m.charCodeAt(n++);o=m.charCodeAt(n++);v=r<<16|q<<8|o;w=v>>18&63;u=v>>12&63;t=v>>6&63;s=v&63;p[l++]=c.charAt(w)+c.charAt(u)+c.charAt(t)+c.charAt(s);}while(n<m.length);g=p.join("");h=m.length%3;return(h?g.slice(0,h-3):g)+"===".slice(h||3);}function b(l){if(l===undefined||typeof l!=="string"||!l){return l;}var m=0,h=0,g,u,q,p,n,v,t,s,r,o=[];do{v=c.indexOf(l.charAt(m++));t=c.indexOf(l.charAt(m++));s=c.indexOf(l.charAt(m++));r=c.indexOf(l.charAt(m++));u=v<<18|t<<12|s<<6|r;q=u>>16&255;p=u>>8&255;n=u&255;if(s===64){o[h++]=String.fromCharCode(q);}else{if(r===64){o[h++]=String.fromCharCode(q,p);}else{o[h++]=String.fromCharCode(q,p,n);}}}while(m<l.length);g=o.join("");return decodeURIComponent(decodeURI(g.replace(/\0+$/,"")));}function f(h){var g=h.toString(16);return g.length===1?"0"+g:g;}function d(h,g,i){return"#"+f(h)+f(g)+f(i);}function a(h){var g=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(h);return g?{r:parseInt(g[1],16),g:parseInt(g[2],16),b:parseInt(g[3],16)}:null;}return{b64enc:e,b64dec:b,rgbToHex:d,hexToRgb:a};}());aim.agent=(function(){var a=null,r=null,c=false,t=null,f=null,h=null,b=null,l=null,n=null,m=null,q=null,d=null,s=null,j=null,g=[{name:"Windows 3.11",regexp:/Win16/},{name:"Windows 95",regexp:/(Windows 95|Win95|Windows_95)/},{name:"Windows ME",regexp:/(Win 9x 4.90|Windows ME)/},{name:"Windows 98",regexp:/(Windows 98|Win98)/},{name:"Windows CE",regexp:/Windows CE/},{name:"Windows 2000",regexp:/(Windows NT 5.0|Windows 2000)/},{name:"Windows XP",regexp:/(Windows NT 5.1|Windows XP)/},{name:"Windows Server 2003",regexp:/Windows NT 5.2/},{name:"Windows Vista",regexp:/Windows NT 6.0/},{name:"Windows 7",regexp:/(Windows 7|Windows NT 6.1)/},{name:"Windows 8.1",regexp:/(Windows 8.1|Windows NT 6.3)/},{name:"Windows 8",regexp:/(Windows 8|Windows NT 6.2)/},{name:"Windows NT 4.0",regexp:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{name:"Windows ME",regexp:/Windows ME/},{name:"Android",regexp:/Android/},{name:"Open BSD",regexp:/OpenBSD/},{name:"Sun OS",regexp:/SunOS/},{name:"Linux",regexp:/(Linux|X11)/},{name:"iOS",regexp:/(iPhone|iPad|iPod)/},{name:"Mac OS X",regexp:/Mac OS X/},{name:"Mac OS",regexp:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{name:"QNX",regexp:/QNX/},{name:"UNIX",regexp:/UNIX/},{name:"BeOS",regexp:/BeOS/},{name:"OS/2",regexp:/OS\/2/},{name:"Search Bot",regexp:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];function o(){var v=window,x=document,w=x.documentElement,u=x.getElementsByTagName("body")[0];s=v.innerWidth||w.clientWidth||u.clientWidth;j=v.innerHeight||w.clientHeight||u.clientHeight;}function e(){var v,u;if((v=a.indexOf("Opera"))!==-1){r="Opera";f=a.substring(v+6);if((v=a.indexOf("Version"))!==-1){f=a.substring(v+8);}}else{if((v=a.indexOf("MSIE"))!==-1){r="Microsoft Internet Explorer";f=a.substring(v+5);}else{if((r==="Netscape")&&(a.indexOf("Trident/")!==-1)){r="Microsoft Internet Explorer";f=a.substring(v+5);if((v=a.indexOf("rv:"))!==-1){f=a.substring(v+3);}}else{if((v=a.indexOf("Chrome"))!==-1){r="Chrome";f=a.substring(v+7);}else{if((v=a.indexOf("Safari"))!==-1){r="Safari";f=a.substring(v+7);if((v=a.indexOf("Version"))!==-1){f=a.substring(v+8);}if(a.indexOf("CriOS")!==-1){r="Chrome";}}else{if((v=a.indexOf("Firefox"))!==-1){r="Firefox";f=a.substring(v+8);}else{if((u=a.lastIndexOf(" ")+1)<(v=a.lastIndexOf("/"))){r=a.substring(u,v);f=a.substring(v+1);if(r.toLowerCase()===r.toUpperCase()){r=navigator.appName;}}}}}}}}}function p(){var u,v;for(u in g){if(g.hasOwnProperty(u)){v=g[u];if(v.regexp.test(a)){h=v.name;break;}}}if(/Windows/.test(h)){b=/Windows (.*)/.exec(h)[1];h="Windows";}switch(h){case"Mac OS X":b=/Mac OS X (10[\.\_\d]+)/.exec(a)[1];break;case"Android":b=/Android ([\.\_\d]+)/.exec(a)[1];break;case"iOS":b=/OS (\d+)_(\d+)_?(\d+)?/.exec(m);b=b[1]+"."+b[2]+"."+(b[3]||0);break;}}function i(u){return u.test(a);}function k(){t=navigator.platform;a=navigator.userAgent;n=window.ontouchstart!==undefined||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints>0;l=navigator.language;q=navigator.vendor;m=navigator.appVersion;r=navigator.appName;f=parseFloat(navigator.appVersion);c=/Mobile|IEMobile|mini|Fennec|Android|iP(ad|od|hone)|Tablet/.test(m);if(/Tablet PC/.test(m)){c=false;}d=(navigator.cookieEnabled)?true:false;if(navigator.cookieEnabled===undefined&&!d){document.cookie="testcookie";d=(document.cookie.indexOf("testcookie")!==-1)?true:false;}e();p();o();}k();return{str:a,browser:r,mobile:c,platform:t,version:f,os:h,osVersion:b,language:l,hasTouch:n,vendor:q,cookies:d,getDims:function(){return{width:s,height:j};},search:i};}());aim.util=(function(){function f(){var r;function s(w){w=w.split("+").join(" ");var t={},v,u=/[?&]?([^=]+)=([^&]*)/g;while((v=u.exec(w))!==null){t[decodeURIComponent(v[1])]=decodeURIComponent(v[2]);}return t;}r=s(document.location.search);return r;}function g(s,t){var r=1;if(t==="ASC"){r=1;}else{if(t==="DESC"){r=-1;}}return function(w,v){var u=(w[s]<v[s])?-1:(w[s]>v[s])?1:0;return u*r;};}function c(s){var r=1;if(s==="ASC"){r=1;}else{if(s==="DESC"){r=-1;}}return function(v,u){var t=v-u;return t*r;};}function h(v,t){var r,s=v.length,u=[];v.sort();if(t!==undefined){v.sort(g(t));}for(r=0;r<s;r++){if(t===undefined){if((v[r]!==v[r+1])&&v[r]!==""){u[u.length]=v[r];}}else{if(r===0&&v[r][t]!==""){u[u.length]=v[r];}if(v[r-1]!==undefined){if((v[r][t]!==v[r-1][t])&&v[r][t]!==""){u[u.length]=v[r];}}}}return u;}function j(w){var u=w.length,s=u,t,v,r=JSON.parse(JSON.stringify(w));while(s--){t=parseInt(Math.random()*u,10);v=r[s];r[s]=r[t];r[t]=v;}return r;}function d(s,r){return Math.floor(Math.random()*(r-s))+s+1;}function n(u,t){var r,s;if(Object.prototype.toString.call(u)==="[object Array]"||Object.prototype.toString.call(u)==="[object NodeList]"||u instanceof Array){s=u.length;}else{s=u;}for(r=0;r<s;r++){t(u[r]||r,r);}}function a(s,t){var r;for(r in s){if(s.hasOwnProperty(r)){t(r,s[r]);}}}function m(u,v){var s={},t,r=function(w,x){if(v!==undefined){s[w]=v(x);}else{s[w]=x;}};if(Object.prototype.toString.call(u)==="[object Array]"){n(u,function(w){t=w.split("=");r(t[0],t[1]);});}else{t=u.split("=");r(t[0],t[1]);}return s;}function l(s,u,r){var t="";if(s==="undefined"&&typeof s!=="string"){return false;}t+=s+"=";if(u!==undefined){if(r.encoder!==undefined&&typeof r.encoder==="function"){t+=r.encoder(u)+"; ";}else{t+=u.toString()+"; ";}}if(r.maxAge&&typeof r.maxAge==="number"){t+="Max-Age="+r.maxAge+"; ";}if(r.domain!==undefined){t+="Domain="+r.domain+"; ";}if(r.path!==undefined){t+="Path="+r.path+"; ";}if(r.expires&&typeof r.expires.toUTCString==="function"){t+="Expires="+r.expires.toUTCString()+"; ";}if(r.httpOnly!==undefined&&r.httpOnly){t+="HttpOnly; ";}if(r.secure!==undefined&&r.secure){t+="Secure; ";}return t.toString();}function p(s,u,r){if(s.match("=")){document.cookie=s;}else{var t=l(s,u,r);document.cookie=t;}}function k(s,v){var t=document.cookie,u,r;if(t!==""){u=t.split("; ");r=m(u,v);if(s!==undefined){return r[s];}return r;}}function o(v,t){var s,w=[".js",".html",".htm",".jpg",".css",".png",".gif",".xml",".csv",".sco",".ico"],x=(t===undefined)?w:t,u,r;u=x.length;for(s=0;s<u;s++){r=new RegExp(x[s],"g");if(v.match(r)){return x[s];}}return false;}function i(r){return r.charAt(0).toUpperCase()+r.slice(1);}function b(r){return r.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1");}function q(s,t){var r="";a(s,function(u,v){r+=v+"="+u+(t||";");});return r;}function e(r,t){var u=r.split((t||";")),s={};n(u,function(w){var v=w.split("=");if(v[0]!==undefined&&v[1]!==undefined){s[v[0]]=v[1];}});return s;}return{params:f,sort:g,sortNumber:c,cleanDuplicates:h,shuffle:j,random:d,each:n,prop:a,checkIsFile:o,uppercaseFirst:i,escapeString:b,serialize:q,deserialize:e,parseCookies:m,serializeCookie:l,setCookie:p,getCookie:k};}());}());
