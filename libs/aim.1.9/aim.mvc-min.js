/*global console, debug, aim, opera, alert, ActiveXObject, DOMTokenList */
/*jslint plusplus:true, nomen:true, bitwise:true, newcap:true, regexp:true, forin:true */
/**
 * @name AIM JavaScript Framework and Library
 * @author AV Digital Media Ltd.
 * @version 1.9.0
 * @copyright (c) Copyright 2013 - 2017 AV Digital Media Ltd. All Rights Reserved.
 * No unauthorized copying, distribution or modification to this code in whole
 * or in part is permitted without the express permission of
 * AV Digital Media Ltd (UK).
 */
 (function(){"use strict";
window.aim=window.aim||{};aim.INJECTION=true;aim.STARTUP="AIM.STARTUP";aim.root=function(){return undefined;};aim.root.extend=function(d){var a,b=function(){return this;};a=b.prototype=new this();try{d.call(a,this.prototype);b.create=aim.root.create;b.extend=aim.root.extend;}catch(c){console.log("Class file error - extend method should be passed a function",c);}return b;};aim.root.create=function(){var a=new this();a.construct.apply(a,arguments);return a;};aim.contexts=(function(){var a={};return{store:function(d,c,b){if(d instanceof aim.context){a[c]=b;}},destroy:function(c,b){if(c instanceof aim.context||c instanceof aim.command){if(a[b]!==undefined){a[b].destroy();delete a[b];}}},map:function(e,b,c,f,d){if(e instanceof aim.context||e instanceof aim.command||e instanceof aim.module){if(a[b]!==undefined){a[b].map(c,f,d);}}},unmap:function(d,b,c){if(d instanceof aim.context||d instanceof aim.command||d instanceof aim.module){if(a[b]!==undefined){a[b].unmap(c);}}},args:function(d,b,c){if(d instanceof aim.context||d instanceof aim.command||d instanceof aim.module||d instanceof aim.view||d instanceof aim.service||d instanceof aim.model){if(a[b]!==undefined){return a[b].args;}}},start:function(c,b){if(a[c]!==undefined){a[c].start(b);}}};}());aim.notify=function(){var p={},a={};function h(s){if(s!==undefined&&typeof s!=="string"){var t,u=[];for(t in a){if(a.hasOwnProperty(t)){if(a[t] instanceof s){u.push(t);}}}return u;}}function n(s){if(s!==undefined){if(typeof s==="string"){if(a.hasOwnProperty(s)){return a[s];}}else{var t;for(t in a){if(a.hasOwnProperty(t)){if(a[t] instanceof s){return a[t];}}}}}}function k(t,u){var s;for(s in t){if(t.hasOwnProperty(s)){u(t[s]);}}}function i(s,x){if(s.inject!==undefined){var w,v,t,u=function(){t=n(v);if(t!==undefined){if(t instanceof aim.command&&(s instanceof aim.view||s instanceof aim.service||s instanceof aim.module||s instanceof aim.model)){throw new Error("An aim.command can only be injected into other commands.");}if(t instanceof aim.model&&(s instanceof aim.view||s instanceof aim.module)){s[w]=(function(){return{read:function(y){return t.readData(t,y);},each:function(y,z){t.each(t,y,z,true);},search:function(A,z,y){t.each(t,A,z,y,true);}};}());}else{s[w]=t;}}};for(w in s.inject){if(s.inject.hasOwnProperty(w)){if(s[w]!==undefined){throw new Error('Check your injection property name, the value "'+w+'" already exists in the instance of '+s.NAME+" and injection overrides are not permitted. Change the property name.");}v=s.inject[w];k(x,u);delete s.inject[w];}}s.inject=null;delete s.inject;}}function d(s,u){try{if(s.NAME!==undefined&&s.NAME!=="undefined"){if(!a.hasOwnProperty(s.NAME)){a[s.NAME]=s;if(aim.INJECTION&&!(s instanceof aim.model)&&!(s instanceof aim.context)&&!(s instanceof aim.module)){i(a[s.NAME],u);}return true;}debug("Object Reference has already been mapped: "+s.NAME,"W");return false;}debug("Object NAME reference was undefined for mapping, the object was not mapped. ","E");return false;}catch(t){debug("An error occured whilst trying to save the object instance : "+t,"W");debug(s);return false;}return true;}function l(s){var w,u,v,t=[];if(s!==undefined){for(w in p){if(p.hasOwnProperty(w)){v=p[w].length;for(u=0;u<v;u++){if(p[w][u].name===s){t.push(p[w][u]);}}}}}else{t=p;}return JSON.parse(JSON.stringify(t));}function b(x,w,s,u){var t,v;if(x===undefined||x==="undefined"){debug('Event name error, "undefined" is not an allowed event name, did you reference an undefined value in the register call for the '+s.NAME+"?","W");}else{if(p[x]===undefined){p[x]=[];}else{v=p[x].length;for(t=0;t<v;t++){if(p[x][t].callback===w&&p[x][t].name===s.NAME){debug("Notifier Error :: Event for this object and method has already been mapped : "+s+" : "+x,"W");return false;}}}if(s instanceof aim.command){p[x].push({callback:w,name:s.NAME,once:(u===undefined)?false:u,isCommand:true});return true;}p[x].push({callback:w,name:s.NAME,once:(u===undefined)?false:u});return true;}}function m(s){var v,u,t;for(v in p){if(p.hasOwnProperty(v)){u=p[v].length-1;for(t=u;t>-1;t--){if(p[v][t]!==undefined){if(p[v][t].name===s){p[v].splice(t,1);}}}if(p[v].length===0){delete p[v];}}}}function e(w,s){var u,v,t=(typeof s==="string")?s:s.NAME;if(typeof w==="boolean "&&w){m(t);}else{if(p[w]!==undefined){v=p[w].length-1;for(u=v;u>=0;u--){if(p[w][u]!==undefined){if(p[w][u].name===t){p[w].splice(u,1);}}}if(p[w].length===0){delete p[w];}}}}function r(u){if(u!==undefined){if(typeof u==="string"){if(a[u]!==undefined){if(a[u].destroy!==undefined&&typeof a[u].destroy==="function"){a[u].destroy();}m(u);delete a[u];}else{debug("No object to remove with reference "+u,"W");}}else{var t,s=0;for(t in a){if(a[t]!==undefined){if(a[t] instanceof u){if(a[t].destroy!==undefined&&typeof a[t].destroy==="function"){a[t].destroy();}m(t);delete a[t];s++;}}}if(s===0){debug("No object to remove with reference "+u.NAME,"W");}}}}function q(w,v){var s,u,t;if(p[w]!==undefined){u=p[w].length-1;for(s=u;s>=0;s--){if(p[w][s]!==undefined){t=a[p[w][s].name];if(t!==undefined){p[w][s].callback.call(t,v);if(p){if(p[w][s].once!==undefined&&p[w][s].once){if(p[w][s].isCommand!==undefined&&p[w][s].isCommand){delete a[p[w][s].name];}p[w].splice(s,1);if(p[w].length===0){delete p[w];}}}}}}}}function f(s,u,t){var v;if(t instanceof aim.Command){v=n(s,t);if(v!==undefined&&v instanceof aim.Command){v.execute(u);}}}function c(){var t=0,s;for(s in a){if(a.hasOwnProperty(s)){t++;}}return t;}function j(){var t=[],s;for(s in a){if(a.hasOwnProperty(s)){t.push(s);}}return t;}function o(){var s;for(s in a){if(a.hasOwnProperty(s)){if(a[s].destroy!==undefined&&typeof a[s].destroy==="function"){a[s].destroy();}else{debug("The destroy() method was not found on the specified object","W");}}}a=null;p=null;}function g(){var s,t=[];for(s in a){if(a.hasOwnProperty(s)){t.push({name:s,ref:a[s]});}}return t;}this.store=d;this.register=b;this.unregister=e;this.registrations=l;this.dispatch=q;this.getObject=n;this.getInstances=h;this.remove=r;this.list=g;this.execute=f;this.names=j;this.length=c;this.destroy=o;};aim.dispatcher=aim.root.extend(function(){var o={};function m(r){var q;for(q in o){if(o.hasOwnProperty(q)){r(o[q]);}}}function e(r,q){if(r instanceof aim.context){if(o[q]===undefined){o[q]=new aim.notify();return true;}throw new Error('The Notification object "'+q+'" is already defined, this implies the destroy method on the context was not executed, or a duplicate context initialization');}return false;}function g(r,q){if(r instanceof aim.context){if(q===undefined){return o;}return(o[q]!==undefined)?o[q]:null;}return null;}function n(r,q,s){if(r instanceof aim.command||r instanceof aim.view){return(o[q]!==undefined)?o[q].getObject(s):null;}return false;}function c(s,r,q){if(s instanceof aim.command||s instanceof aim.service||s instanceof aim.module){return(o[r]!==undefined)?o[r].getObject(q):null;}return false;}function h(t,s,r,q){if(t instanceof aim.command||t instanceof aim.service||t instanceof aim.view){return(o[s]!==undefined)?o[s].getObject(r).readData(q):null;}return false;}function p(s,q,v,u,t,r){if(s instanceof aim.context||s instanceof aim.command||s instanceof aim.view||s instanceof aim.module){if(o[q]!==undefined){o[q].register(v,u,t,r);}}return false;}function l(r,q,u,t,s){if(r instanceof aim.context||r instanceof aim.command||r instanceof aim.view||r instanceof aim.module){if(o[q]!==undefined){o[q].unregister(u,t,s);return true;}}return false;}function k(s,r,u,t,q){if(s instanceof aim.context||s instanceof aim.command||s instanceof aim.view||s instanceof aim.module||s instanceof aim.model||s instanceof aim.service){if(q!==undefined&&q){m(function(v){if(s instanceof aim.model){v.dispatch(u);}else{v.dispatch(u,t);}});}else{if(o[r]!==undefined){if(s instanceof aim.model){o[r].dispatch(u);}else{o[r].dispatch(u,t);}}}return true;}return false;}function j(r,q,s){if(r instanceof aim.command||r instanceof aim.context){return(o[q]!==undefined)?o[q].getObject(s):null;}return false;}function i(r,q,s){if(r instanceof aim.command||r instanceof aim.context||r instanceof aim.module||r instanceof aim.view||r instanceof aim.service||r instanceof aim.model){return(o[q]!==undefined)?o[q].getInstances(s):null;}return false;}function f(r,q,s){if(r instanceof aim.context||r instanceof aim.command||r instanceof aim.module||r instanceof aim.view){if(o[q]!==undefined){o[q].remove(s);}}return false;}function b(r,q){if(r instanceof aim.context){if(o[q]!==undefined){o[q].destroy();delete o[q];return true;}return false;}return false;}function d(q){if(o[q]!==undefined){return o[q].names();}}function a(q){if(o[q]!==undefined){return o[q].registrations();}}this.getNotifier=function(q){return g(this,q);};this.setNotifier=function(q){return e(this,q);};this.instanceId=null;this.NAME=null;this.NOTIFY=null;this.construct=function(){var q=arguments;this.NOTIFY=q[0];if(q[1]!==undefined){if(isNaN(parseInt(q[1],10))&&typeof q[1]!=="boolean"){this.NAME=q[1];}else{if(typeof q[1]!=="boolean"){this.NAME=this.NAME+q[1];this.instanceId=parseInt(q[1],10);}}}};this.initialize=function(){return undefined;};this.register=function(t,s,r,q){p(this,this.NOTIFY,t,s,r,q);};this.unregister=function(s,r,q){l(this,this.NOTIFY,s,r,q);};this.dispatch=function(s,r,q){k(this,this.NOTIFY,s,r,q);};this.find=function(q){return j(this,this.NOTIFY,q);};this.instances=function(q){return i(this,this.NOTIFY,q);};this.remove=function(q){f(this,this.NOTIFY,q);};this.getViewObj=function(q){return n(this,this.NOTIFY,q);};this.getModelObj=function(q){return c(this,this.NOTIFY,q);};this.getModelData=function(r,q){return h(this,this.NOTIFY,r,q);};this.listObjects=function(){return d(this.NOTIFY);};this.registeredEvents=function(){return a(this.NOTIFY);};this.destroy=function(){b(this,this.NAME);};});aim.context=aim.dispatcher.extend(function($super){var b=function(d,g,f,e){var c;if(d!==undefined&&typeof d==="function"){c=d.create(this.NOTIFY,f);if(c.NAME===null){throw new Error('The NAME property for this instance was not set, mapping did not occur, check your aim. Extensions and ensure they all have relevent unique this.NAME = "" assigned!');}if(this.getNotifier(this.NOTIFY).store(c,this.getNotifier())){c.initialize();if(c instanceof aim.command&&g!==undefined){this.register(g,c.execute,c,((typeof f==="boolean")?f:(e===undefined)?false:e));}if(c instanceof aim.module){c.mappings();}}}},a=function(c){this.remove(c);};this.args=null;this.construct=function(){var d=arguments,c=d[1];this.NAME=d[0];if(d[2]!==undefined){this.args=d[2];}this.NOTIFY=this.NAME;this.setNotifier(this.NOTIFY);aim.contexts.store(this,this.NAME,this);if(c&&c!==undefined){this.startup();this.dispatch(aim.STARTUP);}};this.startup=function(){this.mapModels();this.mapServices();this.mapViews();this.mapCommands();};this.map=function(c,f,e,d){b.call(this,c,f,e,d);};this.unmap=function(c){a.call(this,c);};this.mapModels=function(){return undefined;};this.mapViews=function(){return undefined;};this.mapCommands=function(){return undefined;};this.mapServices=function(){return undefined;};this.destroy=function(){$super.destroy.call(this);};});aim.model=aim.dispatcher.extend(function($super){var x={};function k(B,D){var C=true;if(x[B]===undefined){debug("The default model reference key has been deleted.","W");return undefined;}if(x[B][D]!==undefined&&Object.prototype.toString.call(x[B][D])==="[object Array]"){C=false;}return C;}function m(B,C){switch(B){case 1:C=parseInt(C,10)||Number(C);break;case 2:C=String(C);break;case 3:C=Boolean(C);break;case 4:break;}return C;}function p(B,D,C){if(C===undefined){debug("The name parameter was undefined, a Model Object requires a name reference: "+B,"W");return false;}x[B][C]=(D!==undefined&&D)?{}:[];return true;}function w(B){if(x[B]!==undefined){delete x[B];}}function g(B,C,D){if(x[B][C]!==undefined){if(Object.prototype.toString.call(x[B][C])==="[object Array]"&&Object.prototype.toString.call(D)!=="[object Array]"){debug("You are overriding and Model of type Array with an Object Literal, you may as well set up an Object as the Model if this is intended","W");}else{if(Object.prototype.toString.call(x[B][C])!=="[object Array]"&&Object.prototype.toString.call(D)==="[object Array]"){debug("You are overriding and Model of type Object with an Array, you may as well set up an Array as the model if this was intended","W");}}}x[B][C]=D;}function r(B,C,E){var D;if(x[B]===undefined){debug("The default model reference key has been deleted.","W");return undefined;}if(x[B][C]!==undefined){D=(E===undefined||E===true)?JSON.parse(JSON.stringify(x[B][C])):x[B][C];}return D;}function s(C,F){var E,B=F.length,D=F[0];if(!k(C,D)){for(E=0;E<B;E++){if(E>0){x[C][D].push(F[E]);}}}else{throw new Error("You cannot push data into an Object that is not an array");}}function e(D,C,I,G){var E,B,H,F=C;if(typeof C==="string"){if(x[D][C]!==undefined){F=x[D][C];}}if(Object.prototype.toString.call(F)==="[object Array]"){B=F.length;for(E=0;E<B;E++){I((G===undefined||G===false)?F[E]:JSON.stringify(F[E]),E);}}else{for(H in F){if(F.hasOwnProperty(H)){I((G===undefined||G===false)?F[H]:JSON.stringify(F[H]),H);}}}}function j(K,B,D,I,J){var F=x[K][B],E=[],H,G=function(N,M){var L=true;e(K,M,function(O,P){if(I===undefined||I===true){if(O!==N[P]){L=false;}}else{H=new RegExp(O,"g");if(!N[P].match(H)){L=false;}}});if(L){E.push(N);}},C=function(L){if(Object.prototype.toString.call(D)==="[object Array]"){e(K,D,function(M){G(L,M);});}else{G(L,D);}};if(F!==undefined){if(!k(K,B)){e(K,F,function(L){C(L);});}}if(J===undefined||J){E=JSON.parse(JSON.stringify(E));}return E;}function A(I,B,J,H,E,C){var D,F,G;if(!k(I,B)){G=x[I][B];F=G.length;for(D=0;D<F;D++){if(E!==undefined){if(G[D][E]!==undefined&&G[D][E]===C){G[D][J]=H;}}else{G[D][J]=H;}}}else{throw new Error("You cannot update an array index property of an object that is not an array");}}function i(B,D,C,E){var F;if(!k(B,D)){F=x[B][D];if(F[C]!==undefined){if(E!==undefined){F[C]=E;}return F[C];}debug("The index specified does not exist "+C,"W");return false;}debug("The model is an Object literal and does not have indexed values, use the property function","W");return false;}function b(B,C,D){if(!k(B,C)){var E=x[B][C];return E.indexOf(D);}}function f(B,D){if(k(B,D)){var C=0,E;for(E in x[B][D]){if(x[B][D].hasOwnProperty(E)){C++;}}return C;}return(x[B][D]!==undefined)?x[B][D].length:-1;}function l(C,D){var B=1;if(C==="ASC"){B=1;}else{if(C==="DESC"){B=-1;}}return function(G,F){var E=(G[D]<F[D])?-1:(G[D]>F[D])?1:0;return E*B;};}function a(C,B){if(B===undefined){B="ASC";}if(typeof C[0]==="string"){if(B==="ASC"){C.sort();}else{if(B==="DESC"){C.sort();C.reverse();}}}else{if(B==="ASC"){C.sort(function(E,D){return E-D;});}else{if(B==="DESC"){C.sort(function(E,D){return D-E;});}}}}function v(C,B,D,F){var E;if(Object.prototype.toString.call(B)==="[object Array]"){E=B;}else{if(!k(C,B)){E=x[C][B];}}if(E!==undefined){if(F!==undefined){E.sort(l(D,F));}else{a(E,D);}return E;}return false;}function h(D,B,H,E){var G,F,I=[],C=false;if(Object.prototype.toString.call(B)==="[object Array]"){G=B;}else{if(!k(D,B)){G=x[D][B];C=true;}}if(G!==undefined){if(H!==undefined&&H!==null){G.sort(l("ASC",H));}else{a(G);}for(F=0;F<G.length;F++){if(H===undefined||H===null){if((G[F]!==G[F+1])&&G[F]!==""){I[I.length]=G[F];}}else{if(F===0&&G[F][H]!==""){I[I.length]=G[F];}if(G[F-1]!==undefined){if((G[F][H]!==G[F-1][H])&&G[F][H]!==""){I[I.length]=G[F];}}}}if(E!==undefined&&E&&C===true){x[D][B]=I;}return I;}return false;}function d(B,C,D){var E;if(k(B,C)){for(E in D){if(D.hasOwnProperty(E)){x[B][C][E]=D[E];}}}return x[B][C];}function t(B,C,E,D){if(x[B][C]!==undefined){if(D!==undefined){x[B][C][E]=D;}return x[B][C][E];}}function o(J,B,K,H,C,D){var G=x[J][B],I=G.length,F,E=[],L;for(F=0;F<I;F++){if(G[F][H]!==undefined){if(G[F][H]===C){L={index:F,value:G[F][K]};if(D!==undefined){L.value=m(D,L.value);}E.push(L);}}}if(E.length===1){E=E[0].value;}return E;}function n(B,E,H,D,G,F){var C;if(k(B,E)){C=m(F,t(B,E,H));}else{C=o(B,E,H,D,G,F);}return C;}function q(C,D,G){var F=x[C][D],E,B;if(F!==undefined){if(k(C,D)){if(F[G]!==undefined){delete F[G];}}else{B=F.length;for(E=0;E<B;E++){if(F[E][G]!==undefined){delete F[E][G];}}}}}function z(C,E,D,G){var H=x[C][E],F,B;if(H!==undefined){if(k(C,E)){if(H[D]!==undefined){delete H[D];}}else{B=H.length-1;for(F=B;F>=0;F--){if(G!==undefined){if(H[F][D]!==undefined&&H[F][D]===G){H.splice(F,1);}}else{if(H[F][D]!==undefined){H.splice(F,1);}}}}}}function y(B,D,C){var E=x[B][D];if(E!==undefined){if(k(B,D)){debug("Cannot remove an index from a property model","W");}else{E.splice(C,1);}}}function u(){return JSON.parse(JSON.stringify(x));}function c(B,C){return r(B,C,true);}this.construct=function(){$super.construct.apply(this,arguments);if(this.NAME){x[this.NAME]={};}};this.create=function(C,B){return p.call(this,this.NAME,C,B);};this.setData=function(B,C){return g.call(this,this.NAME,B,C);};this.insert=function(){s.call(this,this.NAME,arguments);};this.length=function(B){return f.call(this,this.NAME,B);};this.update=function(C,F,E,B,D){A.call(this,this.NAME,C,F,E,B,D);};this.index=function(C,B,D){return i.call(this,this.NAME,C,B,D);};this.properties=function(B,C){return d.call(this,this.NAME,B,C);};this.property=function(B,D,C){return t.call(this,this.NAME,B,D,C);};this.readData=function(B){return c.call(this,this.NAME,B||this.NAME);};this.remove=function(C,B,D){z.call(this,this.NAME,C,B,D);};this.splice=function(C,B){y.call(this,this.NAME,C,B);};this.search=function(D,C,B,E){return j.call(this,this.NAME,D,C,B,E);};this.indexOf=function(B,C){return b.call(this,this.NAME,B,C);};this.value=function(C,E,B,D){return n.call(this,this.NAME,C,E,B,D);};this.asNumber=function(C,E,B,D){return n.call(this,this.NAME,C,E,B,D,1);};this.asString=function(C,E,B,D){return n.call(this,this.NAME,C,E,B,D,2);};this.asBoolean=function(C,E,B,D){return n.call(this,this.NAME,C,E,B,D,3);};this.each=function(B,D,C){e.call(this,this.NAME,B,D,C);};this.sort=function(B,C,D){return v.call(this,this.NAME,B,C,D);};this.clean=function(B,D,C){return h.call(this,this.NAME,B,D,C);};this.clear=function(B,C){q.call(this,this.NAME,B,C);};this.list=function(){return u.call(this);};this.destroy=function(){w(this.NAME);};});aim.command=aim.dispatcher.extend(function(){this.model=function(a){var b=this.getModelObj(a);return(b instanceof aim.model)?b:null;};this.service=function(a){var b=this.find(a);return(b instanceof aim.service)?b:null;};this.view=function(a){var b=this.find(a);return(b instanceof aim.view)?b:null;};this.module=function(a){var b=this.find(a);return(b instanceof aim.module)?b:null;};this.command=function(a,b,d){var c=this.find(a);if(c instanceof aim.command){if(d===undefined){return c.execute(b);}if(c[d]!==undefined){return c[d](b);}}};this.unmap=function(a){aim.contexts.unmap(this,this.NOTIFY,a);};this.map=function(a,c,b){aim.contexts.map(this,this.NOTIFY,a,c,b);};this.getArguments=function(){return aim.contexts.args(this,this.NOTIFY,this);};});aim.service=aim.dispatcher.extend(function(){this.ajax=function(b){var a=this;b.encode=(b.encode===undefined)?false:b.encode;b.headers=(b.headers===undefined)?{}:b.headers;if(aim.ajax!==undefined){aim.ajax.send({type:b.type,url:b.path,dataType:b.format,data:b.data,headers:b.headers,readystate:function(c){a.readystate(b.id,c);},success:function(c){if(b.onSuccess!==undefined){b.onSuccess(b.id,c);return;}a.result(b.id,c);},error:function(c){if(b.onError!==undefined){b.onError(b.id,c);}a.error(b.id,c);},encode:b.encode},this);}else{debug("You must include the aim.ajax Library file to use this internal method","E");}};this.determineResponder=function(b,d,a,c){if(c!==undefined){c(b,d,a);}else{switch(b){case"readystate":this.readystate(d,a);break;case"error":this.error(d,a);break;case"complete":this.result(d,a);break;}}};this.error=function(b,a){return false;};this.readystate=function(b,a){return false;};this.result=function(b,a){this.dispatch(b,a);};});aim.view=aim.dispatcher.extend(function($super){this.view=null;this.bts=null;this.els=null;this.conts=null;this.inpts=null;this.objs=null;this.speed=1000;this.construct=function(){$super.construct.apply(this,arguments);this.setObjects();};this.initialize=function(){this.render();};this.setView=function(a,b){if(b===undefined||b){if(aim.$!==undefined){this.view=aim.$(a);}}else{if(!b){if(typeof a==="string"){if(aim.dom!==undefined){this.view=aim.dom.select(a);}}else{this.view=a;}}}};this.template=function(c,b,a){if(b.append!==undefined&&typeof b.append==="function"){b.append(c);}else{if(b.appendChild!==undefined&&typeof b.appendChild==="function"){b.appendChild(c);}}if(a===undefined||a===true){this.render();}};this.model=function(a,b){return this.getModelData(a,b);};this.content=function(c,b,e){var d,a;switch(b){case 1:d="html";break;case 2:d="text";break;case 3:d="val";break;default:d="html";break;}a=this.view[d](c,e);return a;};this.find=function(d,b,a){var c;if(aim.$!==undefined){if(b===undefined||typeof b==="boolean"){if(this.view.node!==undefined){c=this.view.select(d,b||true);}else{c=aim.dom.select(d,this.view,b||false);}}else{if(this.view.node!==undefined){c=this.view.select(d,a||true);}else{c=aim.dom.select(d,b,a||false);}}}else{debug("The aim.dom library file must be loaded to use this method.","E");}return c;};this.hide=function(a){if(a===undefined){if(this.view.node!==undefined){this.view.display("none");}else{aim.dom.display(this.view,"none");}}else{if(this.view.node!==undefined){this.view.removeClass(a);}else{aim.dom.removeClass(this.view,a);}}return true;};this.show=function(a){if(a===undefined){a=(a===undefined)?"block":a;if(this.view.node!==undefined){this.view.display(a);}else{aim.dom.display(this.view,a);}}else{if(this.view.node!==undefined){this.view.addClass(a);}else{aim.dom.addClass(this.view,a);}}return true;};this.setObjects=function(){this.bts={};this.els={};this.conts={};this.inpts={};this.objs={};};this.clearObjects=function(){var a=function(b){var c;for(c in b){if(b.hasOwnProperty(c)){if(b[c].destroy!==undefined&&typeof b[c].destroy==="function"){b[c].destroy();}}}return null;};this.bts=a(this.bts);this.els=a(this.els);this.conts=a(this.conts);this.inpts=a(this.inpts);this.objs=a(this.objs);};this.addEvents=function(){return false;};this.removeEvents=function(){return false;};this.render=function(){return undefined;};this.destroy=function(){this.removeEvents();this.clearObjects();if(this.view){if(this.view.destroy!==undefined){this.view.destroy();}this.view=null;}};});aim.module=aim.view.extend(function(){this.moduleId=null;this.parameters=null;this.unmap=function(a){aim.contexts.unmap(this,this.NOTIFY,a);};this.map=function(a,c,b){aim.contexts.map(this,this.NOTIFY,a,c,b);};this.mappings=function(){return undefined;};this.model=function(a){var b=this.getModelObj(a);return(b instanceof aim.model)?b:null;};});}());
